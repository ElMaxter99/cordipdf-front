<mat-toolbar color="primary" class="shadow-md">
  <button mat-icon-button (click)="goBack()">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span class="ml-2">Editor de plantilla</span>
  <span class="flex-1"></span>
  <button mat-button disabled>
    {{ template?.name }}
  </button>
  <mat-progress-spinner *ngIf="saving()" diameter="22" mode="indeterminate"></mat-progress-spinner>
</mat-toolbar>

<div class="editor-shell">
  <aside class="sidebar">
    <app-editor-toolbar
      [zoom]="zoom"
      [canUndo]="canUndo"
      [canRedo]="canRedo"
      (addField)="addField()"
      (undo)="undo()"
      (redo)="redo()"
      (save)="save()"
      (zoomChange)="zoom = $event"
    ></app-editor-toolbar>

    <mat-divider class="my-4"></mat-divider>

    <app-field-properties-panel [field]="selectedField" (update)="updateField($event)"></app-field-properties-panel>
  </aside>

  <section class="canvas-area">
    <div class="page-wrapper" *ngIf="template">
      <app-pdf-viewer
        [src]="template.pdfUrl"
        [pages]="pages"
        [scale]="zoom"
        [selectedFieldId]="selectedField?.id"
        (selectField)="handleSelect($event)"
        (fieldsChange)="handleFieldsChange($event)"
      ></app-pdf-viewer>
    </div>
  </section>
</div>
